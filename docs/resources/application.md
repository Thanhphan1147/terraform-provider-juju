---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "juju_application Resource - terraform-provider-juju"
subcategory: ""
description: |-
  A resource that represents a single Juju application deployment from a charm. Deployment of bundles is not supported.
---

# juju_application (Resource)

A resource that represents a single Juju application deployment from a charm. Deployment of bundles is not supported.

## Example Usage

```terraform
# resource "juju_application" "this" {
#   name = "my-application"

#   model = juju_model.development.name

#   charm {
#     name     = "hello-kubecon"
#     channel  = "edge"
#     revision = 14
#     series   = "trusty"
#   }

#   units = 3

#   config = {
#     external-hostname = "..."
#   }
# }

# resource "juju_application" "placement_example" {
#   name  = "placement-example"
#   model = juju_model.development.name
#   charm {
#     name     = "hello-kubecon"
#     channel  = "edge"
#     revision = 14
#     series   = "trusty"
#   }

#   units     = 3
#   placement = "0,1,2"

#   config = {
#     external-hostname = "..."
#   }
# }

terraform {
  required_providers {
    juju = {
      source  = "registry.terraform.io/juju/juju"
      version = "0.12.0"
    }
  }
}

provider "juju" {}

locals {
  juju_model_name = "jenkins"
}

/*
Note: If deploying jenkins for the first time or redeploying (remove and redeploy),
it's recommended to deploy with the juju CLI and specifying the home storage:

  juju deploy jenkins-k8s --channel=latest/edge --storage jenkins-home=2GB

Then import the deployed charm to terraform state. This is a workaround since the juju
terraform provider has not yet support storage.
*/
resource "juju_application" "jenkins-k8s" {
  name  = "jenkins-k8s"
  model = local.juju_model_name

  charm {
    name     = "jenkins-k8s"
    revision = 92
    channel  = "latest/edge"
    base     = "ubuntu@22.04" # required, otherwise will error: series "focal" not supported by charm
  }

  # 2GB of allocated memory will give jenkins 1GB of heap, change this if necessary.
  constraints = "arch=amd64 mem=2048M"

  storage_constraints = {
    jenkins-home = 2048
  }

  units = 1 # There cannot be more than 1 server unit.
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `model` (String) The name of the model where the application is to be deployed.

### Optional

- `charm` (Block List) The name of the charm to be installed from Charmhub. (see [below for nested schema](#nestedblock--charm))
- `config` (Map of String) Application specific configuration. Must evaluate to a string, integer or boolean.
- `constraints` (String) Constraints imposed on this application.
- `endpoint_bindings` (Attributes Set) Configure endpoint bindings (see [below for nested schema](#nestedatt--endpoint_bindings))
- `expose` (Block List) Makes an application publicly available over the network (see [below for nested schema](#nestedblock--expose))
- `name` (String) A custom name for the application deployment. If empty, uses the charm's name.
- `placement` (String) Specify the target location for the application's units
- `resources` (Map of Number) Charm resource revisions. Must evaluate to an integer.

	There are a few scenarios that need to be considered:
	* If the plan does not specify resource revision and resources are added to the plan,
	resources with specified revisions will be attached to the application (equivalent
	to juju attach-resource).
	* If the plan does specify resource revisions and:
		* If the charm revision or channel is updated, then resources get updated to the 
		  latest revision.
	    * If the charm revision or channel are not updated, then no changes will take 
		  place (juju does not have an "un-attach" command for resources).
- `storage_constraints` (Map of Number) Storage constraints to deploy with the application
- `trust` (Boolean) Set the trust for the application.
- `units` (Number) The number of application units to deploy for the charm.

### Read-Only

- `id` (String) The ID of this resource.
- `principal` (Boolean, Deprecated) Whether this is a Principal application

<a id="nestedblock--charm"></a>
### Nested Schema for `charm`

Required:

- `name` (String) The name of the charm

Optional:

- `base` (String) The operating system on which to deploy. E.g. ubuntu@22.04.
- `channel` (String) The channel to use when deploying a charm. Specified as \<track>/\<risk>/\<branch>.
- `revision` (Number) The revision of the charm to deploy. During the update phase, the charm revision should be update before config update, to avoid issues with config parameters parsing.
- `series` (String, Deprecated) The series on which to deploy.


<a id="nestedatt--endpoint_bindings"></a>
### Nested Schema for `endpoint_bindings`

Required:

- `space` (String) Name of the space to bind the endpoint to.

Optional:

- `endpoint` (String) Name of the endpoint to bind to a space. Keep null (or undefined) to define default binding.


<a id="nestedblock--expose"></a>
### Nested Schema for `expose`

Optional:

- `cidrs` (String) A comma-delimited list of CIDRs that should be able to access the application ports once exposed.
- `endpoints` (String) Expose only the ports that charms have opened for this comma-delimited list of endpoints
- `spaces` (String) A comma-delimited list of spaces that should be able to access the application ports once exposed.

## Import

Import is supported using the following syntax:

```shell
# Applications can be imported using the format: `model_name:application_name`, for example:
$ terraform import juju_application.wordpress development:wordpress
```
